% 初始化EKF状态
% 输入1：X X坐标
% 输入2：Y Y坐标
% 输入3：Z Z坐标
% 输入4：Xn 原来的状态 
% 输入5：Pn 原来的协方差
% 可选输入1：EKF2 使用2维 还是 3维的EKF
% 输出1：Xn 状态
% 输出2：Pn 协方差
function [Xn, Pn] = InitEKF3(Posi, Velo, Xn, Pn, EKF2)
    if nargin == 5
        EKF2 = 0;
    end
    initNum = length(Pn);
    for ii = 1:length(Posi)
        if ~EKF2
            Xn = [Xn; Posi{ii}(1) Velo{ii}(1) ...
                        Posi{ii}(2) Velo{ii}(2) ...
                        Posi{ii}(3) Velo{ii}(3)];
            Pn{initNum + ii} = eye(6);
        else
            Xn = [Xn; Posi{ii}(1) Velo{ii}(1) ...
                        Posi{ii}(2) Velo{ii}(2)];
            Pn{initNum + ii} = eye(4);
        end
    end
end